/* ====== Theme ====== */
:root{
  --bg: #0b1220;
  --panel: #0f172a;
  --border: #1f2937;
  --muted: #8b949e;
  --text: #e6edf3;
  --primary: #1f6feb;
  --accent: #58a6ff;
  --accent-2: #f2cc60;
  --radius: 16px;
  --shadow: 0 6px 24px rgba(0,0,0,.35);
  --gap: 20px;
  --rightW: 360px;
  --vin-control-h: 44px;
  --quickbarW: 88px;
}

*{ box-sizing:border-box }
html,body,#root{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--text);
  font:15.5px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}

/* ====== Page container ====== */
.page{
  max-width: clamp(1024px, 92vw, 1320px);
  margin:0 auto; padding:24px 16px 80px;
  position: relative;
}
.page.has-quickbar{
  padding-left: calc(var(--quickbarW) + 28px);
}

/* ====== Quickbar ====== */
.quickbar{
  position: fixed;
  left: 16px;
  top: 110px;
  width: var(--quickbarW);
  display: grid;
  gap: 14px;
  z-index: 20;
}
.qbtn{
  display: grid;
  justify-items: center;
  gap: 8px;
  padding: 14px 10px;
  border: 1px solid var(--border);
  background: #0c1426;
  color: var(--text);
  border-radius: 14px;
  cursor: pointer;
}
.qbtn .icon{ width: 24px; height: 24px; stroke: currentColor; fill:none; stroke-width:2 }
.qbtn span{ font-size: 12.5px; line-height:1.15; color:#cbd5e1 }

/* Drawer */
.drawer-mask{ position: fixed; inset: 0; background: rgba(0,0,0,.35); z-index: 30; }
.drawer{
  position: fixed; top: 0; right: 0; height: 100vh; width: min(420px, 92vw);
  background: var(--panel); border-left: 1px solid var(--border);
  box-shadow: var(--shadow); z-index: 31; display:flex; flex-direction: column;
}
.drawer-head{ display:flex; align-items:center; justify-content:space-between; padding: 16px 18px; border-bottom:1px solid var(--border) }
.drawer-body{ padding: 14px 18px; overflow:auto }
.bullets{ margin: 8px 0 0 18px }
.bullets li{ margin: 6px 0 }

/* ====== Buttons / chips ====== */
.btn{
  border:1px solid var(--border); background:#0c1426; color:var(--text);
  padding:10px 16px; border-radius:12px; cursor:pointer; min-height:44px;
}
.btn.primary{ background:var(--primary); border-color:transparent }
.btn.ghost{ background:transparent }
.btn.small{ padding:6px 10px; font-size:12px; min-height:unset }
.chip{
  padding:6px 10px; background:#0c1426; border:1px solid var(--border);
  border-radius:100px; color:var(--text)
}

/* ====== Panels ====== */
.panel{
  background:var(--panel); border:1px solid var(--border);
  border-radius:var(--radius); box-shadow:var(--shadow); padding:20px;
}
.panel.wide{ margin-top:24px }
.panel-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:12px }
.panel-title{ margin:0; font-size:16px }

/* ====== Fields ====== */
.field{ display:flex; flex-direction:column; gap:6px; margin-bottom:12px }
.field .label{ color:var(--muted); font-size:12px }
.field input, .field select{
  background:#0c1426; color:var(--text); border:1px solid var(--border);
  border-radius:12px; padding:10px 12px; outline:none; min-height:44px;
}
.field input:focus, .field select:focus{ border-color:#2d81ff }
.two{ display:grid; grid-template-columns:1fr 1fr; gap:12px }

/* ====== VIN bits ====== */
.vin-row{ display:grid; grid-template-columns: 1fr auto; gap:10px; margin-bottom:8px; align-items: end; }
.vin-row input{ height: var(--vin-control-h) }
.vin-row button.btn{ height: var(--vin-control-h); padding: 10px 14px; white-space: nowrap; }
.vin-samples{ margin:6px 0 10px }
.vin-error{ color:#ff8a8a; margin:6px 0 0 }
.vin-card{ border:1px dashed var(--border); border-radius:12px; padding:12px; margin-top:8px }
.vin-title .title{ font-weight:600 }
.vin-title .sub{ color:var(--muted); display:flex; gap:10px; align-items:center; margin-top:4px }
.vin-title .copy{ border:1px solid var(--border); background:#0c1426; color:var(--text); padding:2px 8px; border-radius:100px }
.vin-kv{ display:grid; grid-template-columns:140px 1fr; gap:6px 14px; margin-top:10px }
.vin-kv dt{ color:var(--muted) }
.vin-kv dd{ margin:0 }

/* ====== Top nav ====== */
.topnav{
  display:grid; grid-template-columns:1fr auto auto; gap:12px;
  align-items:center; padding:12px 16px; border:1px solid var(--border);
  background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom:18px;
}
.brand{ font-weight:600 }
.links{ display:flex; gap:18px; color:var(--muted) }
.links a{ cursor:pointer }
.auth{ text-align:right }

/* ====== Hero typography ====== */
.hero-amount{ font-size: clamp(48px, 6vw, 72px); font-weight:700 }
.unit{ font-size:.45em; color:var(--muted) }
.hero-sub{ color:var(--muted); margin:6px 0 12px }

/* ====== mini cards ====== */
.mini-card{
  background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
  padding:16px 16px; box-shadow:var(--shadow); width:100%;
}
.mini-label{ color:var(--muted); font-size:12px; margin-bottom:4px }
.mini-value{ font-weight:600; font-size:20px }
.mini-grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px }

/* unified badge styles */
.badge { 
  border-radius: 6px; padding: 2px 8px; font-size: 12px; font-weight: 600; letter-spacing: .4px;
  border: 1px solid var(--border);
  display: inline-block;
  opacity: 0; transform: translateY(-2px);
  animation: fadeInBadge .4s ease-out forwards;
}
.badge.ok     { background: linear-gradient(90deg,#1f6b36,#56d364); color:#e6edf3; }
.badge.medium { background: linear-gradient(90deg,#8b6b00,#f2cc60); color:#0c1426; }
.badge.bad    { background: linear-gradient(90deg,#6b1f1f,#ff7b72); color:#fff; }
@keyframes fadeInBadge { to { opacity: 1; transform: translateY(0); } }

/* ====== Unified grid for hero + body ====== */
.content-grid{
  display:grid;
  grid-template-columns: 1.25fr 1fr var(--rightW);
  gap: var(--gap);
  margin-bottom: 20px;
  align-items: start;
}
.hero-left{ grid-column: 1 / 3; justify-self: stretch; }
.hero-card{ width:100%; padding:20px; }
.hero-right{ grid-column: 3; display: grid; gap: 12px; }
.col-1{ grid-column: 1; }
.col-2{ grid-column: 2; }
.col-3{ grid-column: 3; }
.col-1, .col-2{ min-height: 520px; }
.right-col{ display:grid; gap:12px; width:100% }

/* ====== Charts ====== */
.chart-box{ height:250px; }
.chart-box.donut{ height:270px }
.chart-title{ color:var(--muted); margin-bottom:8px }
.charts-2{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:stretch; }
.mini-card.chart{ display:flex; flex-direction:column }
.mini-card.chart .chart-box{ flex:1; height:auto; min-height:270px }
@media (max-width:1200px){ .charts-2{ grid-template-columns:1fr } }

/* ====== Amortization table ====== */
.amort-wrap{ overflow:auto; border:1px solid var(--border); border-radius:12px; max-height: 600px; }
.amort{ width:100%; border-collapse:collapse; min-width:640px }
.amort th, .amort td{ padding:12px 14px; border-bottom:1px solid var(--border) }
.amort thead th{ text-align:left; color:var(--muted); font-weight:500; position:sticky; top:0; background:var(--panel) }
.amort tbody tr:hover{ background:#0c1426 }
.amort.mini{ min-width:auto }

/* ====== Responsive ====== */
@media (max-width: 980px){
  .page.has-quickbar{ padding-left: 16px; }
  .quickbar{ position: static; grid-auto-flow: column; width: auto; grid-template-columns: repeat(5, minmax(0,1fr)); margin-bottom: 12px; }
  .qbtn{ padding: 8px 10px }
  .content-grid{ grid-template-columns: 1fr; }
  .hero-left, .hero-right, .col-1, .col-2, .col-3{ grid-column: auto; }
  .right-col{ grid-template-columns: 1fr; }
  .col-1, .col-2{ min-height: unset; }
  .chart-box, .chart-box.donut{ height:220px; }
}

/* ========== Ownership Card Fine-Tuning ========== */
.mini-card .field { display: flex; flex-direction: column; gap: 4px; }
.mini-card .field input {
  background: #0c1426; border: 1px solid #30363d; color: #e6edf3;
  height: 34px; padding: 6px 8px; border-radius: 8px; font-size: 14px;
}
.mini-card .field input:focus { border-color: #58a6ff; outline: none; }
.mini-kv { display: flex; justify-content: space-between; align-items: baseline; margin-top: 4px; }
.mini-card:hover { box-shadow: 0 0 0 1px #1f2937, 0 0 8px rgba(88,166,255,0.1); transition: box-shadow 0.15s ease-in-out; }

/* global muted text */
.muted{ color: var(--muted); }

/* smooth scroll + quickbar active */
html { scroll-behavior: smooth; }
.qbtn.active{
  border-color:#2d81ff;
  box-shadow: 0 0 0 2px rgba(45,129,255,.12) inset;
  color:#e6edf3;
}

/* Ownership section layout */
.ownership-grid{ display:grid; grid-template-columns: minmax(0, 1fr) 320px; gap:16px; }
.ownership-aside{ border:1px dashed var(--border); border-radius:12px; padding:12px; background:#0c1426; }
@media (max-width: 980px){ .ownership-grid{ grid-template-columns: 1fr; } .ownership-aside{ margin-top: 8px; } }

/* Compare Scenarios modal shell */
.compare-backdrop{ position: fixed; inset: 0; background: rgba(0,0,0,.45); z-index: 60; }
.compare-modal{ position: fixed; inset: 0; display: grid; place-items: center; z-index: 61; }
.compare-card{
  width: min(920px, 94vw); max-height: 86vh; overflow:auto;
  background: var(--panel); border:1px solid var(--border);
  border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px;
}

/* ===== Flat badge colors (override gradients) ===== */
.badge {
  background: #111827;
  border: 1px solid #30363d;
  color: #e6edf3;
}

/* success */
.badge.ok,
.mini-card .badge.ok {
  background: #144a2a !important;   /* flat green */
  border-color: #1d4d2b !important;
  color: #8bffb6 !important;
  box-shadow: none !important;
}

/* medium */
.badge.medium {
  background: #3a2f11 !important;   /* flat amber */
  border-color: #6b5400 !important;
  color: #f2cc60 !important;
  box-shadow: none !important;
}

/* danger */
.badge.bad,
.mini-card .badge.bad {
  background: #3a1414 !important;   /* flat red */
  border-color: #5a1f1f !important;
  color: #ffb3b3 !important;
  box-shadow: none !important;
}

